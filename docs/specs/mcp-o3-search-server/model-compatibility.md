# モデル互換性ガイド

## 対応モデル

本MCPサーバーは以下のOpenAIモデルに対応しています：

- **gpt-4-o3** (デフォルト)
- **gpt-5** (ChatGPT 5)
- その他のOpenAI検索対応モデル

## モデルの切り替え方法

### 1. 環境変数での設定

```bash
# .env ファイル
OPENAI_MODEL=gpt-5
```

### 2. 起動時の指定

```bash
OPENAI_MODEL=gpt-5 npm start
```

### 3. MCP設定での指定

```json
{
  "mcpServers": {
    "mcp-openai-search": {
      "command": "npx",
      "args": ["mcp-openai-search"],
      "env": {
        "OPENAI_API_KEY": "your-api-key",
        "OPENAI_MODEL": "gpt-5"
      }
    }
  }
}
```

## モデル別の考慮事項

### ChatGPT 5特有の機能

1. **拡張検索パラメータ** - 新しいフィルターオプション
2. **向上した精度** - より関連性の高い結果
3. **新しいレスポンス形式** - 追加のメタデータ

### 後方互換性

- 基本的な検索機能は全モデルで動作
- モデル固有の機能は自動的に検出・適応
- 非対応機能はグレースフルに無視

## テスト方法

```bash
# 特定モデルでのテスト実行
OPENAI_MODEL=gpt-5 npm test

# 複数モデルでの統合テスト
npm run test:models
```

## トラブルシューティング

### モデルが見つからないエラー

```
Error: The model 'gpt-5' does not exist
```

**解決策**: 
- APIキーが最新モデルへのアクセス権限を持っているか確認
- モデル名のスペルミスをチェック

### レート制限の違い

各モデルには異なるレート制限があります：
- gpt-4-o3: 10,000 requests/min
- gpt-5: 制限はOpenAIアカウント設定に依存

## 将来の拡張性

新しいモデルがリリースされた場合：

1. 環境変数を変更するだけで基本動作は可能
2. モデル固有の機能は必要に応じてアップデート
3. セマンティックバージョニングで互換性を管理